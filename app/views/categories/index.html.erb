<% content_for :title_h1 do %>
	<%= t('menu.category') %>
<% end %>

<div>
	<button id="add_category_btn" class="btn btn-primary" data-toggle="modal" data-target="#add_category_modal">
		<%= t('category.add') %>
	</button>
</div>

<table class="table table-hover">
	<thead>
		<tr>
			<th><%= t('category.name') %></th>
			<th><%= t('category.article_num') %></th>
			<th><%= t('table.operate') %></th>
			<th><%= t('category.sequence') %></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Tanmay</td>
			<td>Bangalore</td>
			<td>560001</td>
			<td>560001</td>
		</tr>
	</tbody>
</table>

<div class="modal fade" id="add_category_modal" tabindex="-1" role="dialog"  aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content" style="max-width: 400px;">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
					&times;
				</button>
				<h4 class="modal-title"><%= t('category.add') %></h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal add_category_form" role="form" action="/categories/create" method="POST">
					<div class="row">
      					<label class="col-sm-3 control-label"><%= t('category.name') %>:</label>
   						<div class="col-sm-8">
      						<input type="text" class="form-control" name="name">
    						</div>
  					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-white" data-dismiss="modal"><%= t("button.cancel") %></button>
				<button type="button" class="btn btn-success"><%= t("button.save") %></button>
			</div>
		</div>
	</div>
</div>


<script type="text/javascript">
	$(function() {
		var $addCategoryModal = $("#add_category_modal");
		var $addCategoryForm = $addCategoryModal.find(".add_order_contact_form");

		$addCategoryModal.on('shown.bs.modal', function(){
		})
		
		$addCategoryModal.find(".btn-success").on('click', function(event){
			if($addCategoryForm.valid()){
				/*$.ajax({
					url: "/orders/create_contact",
					type: "POST",
					dataType: "json",
					data: {
						contact_type: $addCategoryModal.find("input[name=contact_type]").val()
					},
					success: function(data){
						if (data["return_code"] == 0) {
						}else {
						}
					},
					error: function(){
						$addOrderContactModal.find(".error_msg").text("添加信息失败");
					}
				});*/
			};
		});

		$addCategoryForm.validate({
			rules: {
				name: {
					required: true
				}
			},
			messages: {
				name: {
					required: "不能为空"
				}
			}
		});
	});
</script>